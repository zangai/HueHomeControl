<script type="text/javascript">
  var allLights = new AjaxProxy("http://hue.avansti.nl/api/newdeveloper/lights");
  allLights.execute("GET", "", "", function(data) {
    
    ls = JSON.parse(data);
		for(var index in ls) {
			l = ls[index];
			var d = $("<div>"+index+". "+ls.name+"</div>");

				var b = $("<button id='lighton'>ON</button>");
				b.attr("data-lightID", index);
				d.append(b);
			
				var b = $("<button id='lightoff'>OFF</button>");
				b.attr("data-lightID", index);
				d.append(b);

			$("aside.blade#hue").append(d);
	
		}
  });

  var lights = new AjaxProxy("http://hue.avansti.nl/api/newdeveloper/lights");
  $("button#lightoff").bind("click", function (event) {
    var lightID = $(event.currentTarget).attr("data-lightID");
    lights.execute("PUT", '{ "on": false }', "/" + lightID + "/state");
  });
  $("button#lighton").bind("click", function (event) {
    var lightID = $(event.currentTarget).attr("data-lightID");
    lights.execute("PUT", '{ "on": true }', "/" + lightID + "/state");
  });
</script>
<header>
	Direct HUE Control
</header>
<aside class="blade" id="hue">
  <div>
    1
	  <button id="lightoff" data-lightID="1">UIT</button>
	  <button id="lighton"  data-lightID="1">AAN</button>
  </div>
  <div>
    2
	  <button id="lightoff" data-lightID="2">UIT</button>
	  <button id="lighton"  data-lightID="2">AAN</button>
	</div>
  <div>
    3
    <button id="lightoff" data-lightID="3">UIT</button>
	  <button id="lighton"  data-lightID="3">AAN</button>
	</div>
  <div>
    4
    <button id="lightoff" data-lightID="4">UIT</button>
	  <button id="lighton"  data-lightID="4">AAN</button>
	</div>
  <div>
    5
    <button id="lightoff" data-lightID="5">UIT</button>
	  <button id="lighton"  data-lightID="5">AAN</button>
  </div>
  <div>
    6
    <button id="lightoff" data-lightID="6">UIT</button>
	  <button id="lighton"  data-lightID="6">AAN</button>
  </div>
  <div>
    7
    <button id="lightoff" data-lightID="7">UIT</button>
	  <button id="lighton"  data-lightID="7">AAN</button>
  </div>
</aside>
