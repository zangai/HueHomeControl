<script type="text/javascript">
  var allLights = new AjaxProxy("http://hue.avansti.nl/api/newdeveloper/lights");
  allLights.execute("GET", "", "", function(data) {
    
    ls = JSON.parse(data);
		for(var index in ls) {
			l = ls[index];
			var d = $("<div>"+index+". "+l.name+"<br /></div>");

				var b = $("<button id='lighton'>ON</button>");
				b.attr("data-lightID", index);
				d.append(b);
			
				var b = $("<button id='lightoff'>OFF</button>");
				b.attr("data-lightID", index);
				d.append(b);

			$("aside.blade#hue").append(d);
	
		}
  	var lights = new AjaxProxy("http://hue.avansti.nl/api/newdeveloper/lights");
  	$("button#lightoff").bind("click", function (event) {
    		var lightID = $(event.currentTarget).attr("data-lightID");
    		lights.execute("PUT", '{ "on": false }', "/" + lightID + "/state");
  	});
  	$("button#lighton").bind("click", function (event) {
    		var lightID = $(event.currentTarget).attr("data-lightID");
    		lights.execute("PUT", '{ "on": true }', "/" + lightID + "/state");
  	});

  });

</script>
<header>
	Direct HUE Control
</header>
<aside class="blade" id="hue">
</aside>
